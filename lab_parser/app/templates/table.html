{% extends "base.html" %}
{% block title %}Таблица · MedPars{% endblock %}
{% block content %}
  <div class="content-card">
    <h2>Таблица записей</h2>

    <div class="controls no-print">
      <input id="q" type="search" placeholder="Поиск (ФИО, образец, отделение, результат)" style="min-width:320px;">
      <select id="gender">
        <option value="">Пол: любой</option>
      </select>
      <select id="department" style="min-width:260px;">
        <option value="">Отделение: любое</option>
      </select>
      <button id="apply">Применить</button>
      <button id="reset" class="secondary">Сбросить</button>
      <button id="column-settings-btn" class="secondary">Колонки</button>
      <button onclick="window.print()">Печать</button>
    </div>

    <div id="meta"></div>

    <div class="controls no-print">
      <button id="prev-top">← Назад</button>
      <div id="page-numbers-top"></div>
      <button id="next-top">Вперёд →</button>
      <span id="pageinfo-top"></span>
      <select id="per-page-top">
        <option value="10">10 на странице</option>
        <option value="20">20 на странице</option>
        <option value="50">50 на странице</option>
        <option value="100">100 на странице</option>
        <option value="all">Все</option>
      </select>
    </div>

<div class="table-wrapper">
  <div class="table-body-wrapper">
    <table id="records">
      <thead>
        <tr id="table-header">
          <th data-column-id="row_number">#</th>
          <th data-column-id="fio">ФИО</th>
          <th data-column-id="gender">Пол</th>
          <th data-column-id="age">Возраст</th>
          <th data-column-id="birth_date">ДР</th>
          <th data-column-id="sample_id">Идентификатор</th>
          <th data-column-id="department">Отделение</th>
          <th data-column-id="full_result">Результат (полный)</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
</div>

  </div>

  <div id="column-settings-modal" class="modal">
    <div class="modal-content">
      <h3>Настройка колонок</h3>
      <p style="color: var(--text-secondary); margin-bottom: 20px;">
        Перетаскивайте колонки для изменения порядка. Снимите галочку, чтобы скрыть колонку.
      </p>

      <div id="columns-list" class="columns-list">
      </div>

      <div class="form-actions">
        <button id="reset-columns-btn" class="secondary">Сбросить</button>
        <button id="close-modal-btn" class="secondary">Закрыть</button>
      </div>
    </div>
  </div>

  <script src="{{ url_for('static', filename='js/table.js') }}"></script>
{% endblock %}